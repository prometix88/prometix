export interface FeedbackConfig {
  // content survey
  title: string;
  thankyou: string;
  textSubmitted: string;
  textButton: string;
  descriptionScore: string;
  illustration: string;
  followupQuestion: string;

  // API
  api: {
    submit: {
      method: string;
      url: string;
    };
    check: {
      method: string;
      url: string;
    };
    surveyContent: {
      method: string;
      url: string;
    };
  };
  customerId: string;
  surveyId: string;
  meta?: Record<string, any>;
  hideFeedbackButton: boolean;
}

export const prometixConfig = () => {
  const rawConfig = (window as any).Prometix || {};
  const config = {
    title:
      rawConfig?.title ?? 'Seberapa besar kemungkinan Anda merekomendasikan situs ini ke teman?',
    thankyou: rawConfig?.thankyou ?? 'ðŸ™ Terima kasih atas feedback Anda!',
    textSubmitted: rawConfig?.textSubmitted ?? 'Anda telah memberikan feedback. Terima kasih ðŸ™',
    textButton: rawConfig?.textButton ?? 'ðŸ“ Rate your experience',
    descriptionScore: rawConfig?.descriptionScore,
    illustration: rawConfig?.illustration ?? defaultIllustration,
    // 'https://www.pngall.com/wp-content/uploads/12/Illustration-PNG-Free-Image.png',
    followupQuestion: rawConfig?.followupQuestion || 'Apa alasan Anda?',
    // API
    api: {
      submit: {
        url: rawConfig?.api?.submit?.url || 'https://nps-api.telkom-digital.id/v1/feedback',
        method: rawConfig?.api?.submit?.method || 'POST',
      },
      check: {
        url:
          rawConfig?.api?.check?.url || 'https://nps-api.telkom-digital.id/v1/feedback/validation',
        method: rawConfig?.api?.check?.method || 'POST',
      },
      surveyContent: {
        url: rawConfig?.api?.surveyContent?.url || 'https://nps-api.telkom-digital.id/v1/content',
        method: rawConfig?.api?.surveyContent?.method || 'POST',
      },
    },
    // OTHERS
    customerId: rawConfig?.customerId ?? getOrCreateAnonymousId(),
    surveyId: rawConfig?.surveyId ?? '',
    meta: rawConfig?.meta,
    hideFeedbackButton: rawConfig?.hideFeedbackButton ?? false,
  };

  return {
    get: () => ({ ...rawConfig, ...config } as FeedbackConfig),
    set: (newConfig: Partial<FeedbackConfig>) => {
      (window as any).Prometix = { ...rawConfig, ...config, ...newConfig };
    },
  };
};

export function getOrCreateAnonymousId(): string {
  const rawConfig = (window as any).Prometix || {};
  const KEY = `prometix-anonymous-${rawConfig.surveyId}`;
  const cached = localStorage.getItem(KEY);
  if (cached) {
    const { id, timestamp } = JSON.parse(cached);
    const age = Date.now() - timestamp;
    const oneMonth = 1000 * 60 * 60 * 24 * 30;
    if (age < oneMonth) return id;
  }

  const id = crypto.randomUUID();
  localStorage.setItem(KEY, JSON.stringify({ id, timestamp: Date.now() }));
  return id;
}

const defaultIllustration = `data:image/png;base64,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`;

function hexToRgb(hex: string): { r: number; g: number; b: number } | null {
  const sanitized = hex.replace(/^#/, '');
  if (sanitized.length !== 6) return null;

  const r = parseInt(sanitized.slice(0, 2), 16);
  const g = parseInt(sanitized.slice(2, 4), 16);
  const b = parseInt(sanitized.slice(4, 6), 16);

  return { r, g, b };
}

function rgbToHex(r: number, g: number, b: number): string {
  return (
    '#' +
    [r, g, b]
      .map((x) => {
        const hex = x.toString(16);
        return hex.length === 1 ? '0' + hex : hex;
      })
      .join('')
  );
}

function isDarkColor(hex: string): boolean {
  const rgb = hexToRgb(hex);
  if (!rgb) return false;

  // Relative luminance formula
  const brightness = (0.299 * rgb.r + 0.587 * rgb.g + 0.114 * rgb.b) / 255;
  return brightness < 0.5; // < 0.5 dianggap gelap
}

function invertColor(hex: string): string {
  const rgb = hexToRgb(hex);
  if (!rgb) return '#000000';

  const r = 255 - rgb.r;
  const g = 255 - rgb.g;
  const b = 255 - rgb.b;

  return rgbToHex(r, g, b);
}

function getContrastTextColor(hex: string): string {
  return isDarkColor(hex) ? '#FFFFFF' : '#000000';
}

export function generateColors(hex: string): {
  backgroundColor: string;
  textColor: string;
  isDark: boolean;
} {
  return {
    backgroundColor: hex,
    textColor: getContrastTextColor(hex),
    isDark: isDarkColor(hex),
  };
}
